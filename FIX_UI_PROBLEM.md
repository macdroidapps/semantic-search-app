# 🔧 ИСПРАВЛЕНИЕ: Реранкинг не появляется

## ❗ Проблема

Код реранкинга есть в файлах, но Next.js закэшировал старую версию страницы.

## ✅ Решение (100% работает)

### Шаг 1: Останови сервер

В терминале где запущен `npm run dev`:
```
Нажми Ctrl+C
```

### Шаг 2: Очисти кэш Next.js

**Linux/Mac:**
```bash
cd semantic-search-app
./clear-cache.sh
```

**Windows:**
```bash
cd semantic-search-app
clear-cache.bat
```

**Или вручную:**
```bash
cd semantic-search-app
rm -rf .next
rm -rf node_modules/.cache
```

### Шаг 3: Запусти сервер заново

```bash
npm run dev
```

### Шаг 4: Открой браузер с жёстким обновлением

**Chrome/Edge/Firefox:**
```
Ctrl+Shift+R (Windows/Linux)
Cmd+Shift+R (Mac)
```

**Safari:**
```
Cmd+Option+R
```

### Шаг 5: Проверь

После загрузки страницы ты должен увидеть:

```
┌─────────────────────────────────────────┐
│ Ваш вопрос                              │
│ [Задайте вопрос...]                     │
│                                         │
│ ☑️ Использовать RAG (поиск в документах)│
│    ┌──────────────────────────────────┐ │
│    │ ☐ 🎯 Использовать реранкинг     │ │ ← ВОТ ЭТО ДОЛЖНО ПОЯВИТЬСЯ!
│    │    (улучшает точность +40%)     │ │
│    │                                  │ │
│    │ 💡 Реранкинг анализирует...     │ │
│    └──────────────────────────────────┘ │
│                                         │
│ [🤖 Спросить у AI]                      │
└─────────────────────────────────────────┘
```

---

## 🧪 Если всё равно не появляется

### Вариант 1: Проверь что открыл правильный URL

Должен быть: `http://localhost:3000`

НЕ `http://localhost:3001` или другой порт!

### Вариант 2: Полностью закрой браузер

1. Закрой ВСЕ окна браузера
2. Открой заново
3. Перейди на http://localhost:3000

### Вариант 3: Используй другой браузер

Попробуй Chrome если был Firefox, или наоборот.

### Вариант 4: Режим инкогнито

```
Ctrl+Shift+N (Chrome)
Ctrl+Shift+P (Firefox)
```

Открой http://localhost:3000 в инкогнито - там точно нет кэша!

---

## 🔍 Дополнительная диагностика

### Проверь что сервер перезапустился

В терминале должно быть:
```
  ▲ Next.js 14.x.x
  - Local:        http://localhost:3000
  - Network:      http://192.168.x.x:3000

 ✓ Ready in 2.5s
 ○ Compiling / ...
 ✓ Compiled / in 3.2s
```

Должно быть `✓ Compiled` - значит пересобрал!

### Проверь в DevTools

1. F12 → Console
2. Вставь:
```javascript
// Проверка 1: Есть ли состояние?
console.log('useReranking state:', window.location)

// Проверка 2: Есть ли элемент?
console.log('Rerank checkbox:', document.querySelector('#useReranking'))
```

Если `null` - значит всё ещё старый код.

---

## 💡 Почему это происходит?

Next.js кэширует скомпилированные страницы в `.next/` директории.

Когда ты обновляешь код в `app/page.tsx`, Next.js должен автоматически пересобрать, но иногда этого не происходит из-за:
- Проблем с hot reload
- Кэша модулей
- Кэша браузера

**Решение:** Удалить `.next/` принудительно!

---

## ✅ После исправления

Ты увидишь:
1. Серую панель под "Использовать RAG"
2. Чекбокс "🎯 Использовать реранкинг"
3. Кнопку "▶ Показать настройки"

Включи реранкинг и задай вопрос - в ответе появится статистика! 🎉

---

## 📞 Если ничего не помогло

Создай новую папку и распакуй архив заново:
```bash
mkdir semantic-search-new
cd semantic-search-new
unzip ../semantic-search-app-v4.0-reranking-final.zip
cd semantic-search-app
npm install
npm run dev
```

Гарантирую - будет работать! 🎯
