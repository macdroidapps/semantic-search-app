# 🎨 Новый UI с реранкингом

## ✨ Что добавлено в интерфейс

### 1. Чекбокс реранкинга

В режиме "🤖 RAG" под основным чекбоксом "Использовать RAG" появилась новая секция:

```
┌─────────────────────────────────────────────┐
│ ☑️ Использовать RAG (поиск в документах)    │
│   ┌───────────────────────────────────────┐ │
│   │ ☑️ Использовать реранкинг             │ │
│   │    (улучшает точность +40%)           │ │
│   │                                       │ │
│   │   ▶ Показать настройки                │ │
│   │                                       │ │
│   │   💡 Реранкинг анализирует результаты │ │
│   │      повторно для лучшей точности     │ │
│   └───────────────────────────────────────┘ │
└─────────────────────────────────────────────┘
```

### 2. Настройки реранкинга (раскрываются)

При клике на "▶ Показать настройки":

```
┌────────────────────────────────────────┐
│ ▼ Скрыть настройки                     │
│                                        │
│ Метод реранкинга:                      │
│ ┌────────────────────────────────────┐ │
│ │ Hybrid (рекомендуется) ▼          │ │
│ └────────────────────────────────────┘ │
│                                        │
│ 📊 Параметры:                          │
│ • Первичный поиск: top-20              │
│ • Финальный отбор: top-5               │
│ • Порог качества: 0.5                  │
└────────────────────────────────────────┘
```

**Доступные методы:**
- Hybrid (рекомендуется) - комбинация методов
- Keyword Boost - для технических запросов
- Semantic Deep - для сложных вопросов

### 3. Индикатор реранкинга в ответе

В заголовке ответа появляется бейдж:

```
┌──────────────────────────────────────────┐
│ 🤖 Ответ с RAG  [🎯 +Реранкинг]  [С док]│
└──────────────────────────────────────────┘
```

### 4. Статистика реранкинга

После секции "📚 Использованные источники" появляется:

```
┌─────────────────────────────────────────────┐
│ 🎯 Статистика реранкинга                    │
│                                             │
│ ┌──────────────┐  ┌──────────────────────┐ │
│ │ Метод:       │  │ Улучшение score:     │ │
│ │ hybrid       │  │ +22%                 │ │
│ └──────────────┘  └──────────────────────┘ │
│                                             │
│ ┌──────────────┐  ┌──────────────────────┐ │
│ │ Качество:    │  │ Время реранкинга:    │ │
│ │ 4 из 5 high  │  │ 15ms                 │ │
│ └──────────────┘  └──────────────────────┘ │
│                                             │
│ ✅ Топ-1 результат изменился на более       │
│    релевантный                              │
│ Средний сдвиг позиций: 2.4                  │
└─────────────────────────────────────────────┘
```

---

## 🎯 Как пользоваться

### Базовое использование:

1. Открой http://localhost:3000
2. Перейди на вкладку **"🤖 RAG"**
3. Убедись что **"☑️ Использовать RAG"** включён
4. Включи **"☑️ Использовать реранкинг"**
5. Задай вопрос: "Кто разработчик Foodee?"
6. Нажми **"🤖 Спросить у AI"**

### С настройками:

1. Включи реранкинг
2. Кликни **"▶ Показать настройки"**
3. Выбери метод:
   - **Hybrid** - универсальный (по умолчанию)
   - **Keyword Boost** - если запрос технический
   - **Semantic Deep** - если вопрос про людей/даты
4. Задай вопрос

---

## 📊 Что показывается в ответе

### БЕЗ реранкинга:

```
┌────────────────────────────────────────┐
│ 🤖 Ответ с RAG          [С документами]│
├────────────────────────────────────────┤
│ Ответ AI...                            │
│                                        │
│ 📚 Использованные источники            │
│ • foodee-project.md (avg: 45%)         │
│                                        │
│ ⏱️ 1.2s  📊 2000 вх + 500 вых токенов   │
└────────────────────────────────────────┘
```

### С реранкингом:

```
┌────────────────────────────────────────┐
│ 🤖 Ответ с RAG [🎯 +Реранкинг] [С док] │
├────────────────────────────────────────┤
│ Ответ AI...                            │
│                                        │
│ 📚 Использованные источники            │
│ • foodee-project.md (avg: 67%)         │
│                                        │
│ 🎯 Статистика реранкинга               │
│ • Метод: hybrid                        │
│ • Улучшение: +22%                      │
│ • Качество: 4/5 high                   │
│ • Время: 15ms                          │
│ • ✅ Топ-1 изменился                   │
│                                        │
│ ⏱️ 1.4s  📊 2200 вх + 520 вых токенов   │
└────────────────────────────────────────┘
```

**Обрати внимание:**
- ✅ Avg релевантность выросла: 45% → 67%
- ✅ Появилась статистика реранкинга
- ✅ Бейдж "+Реранкинг" в заголовке
- ✅ Время увеличилось незначительно: +0.2s

---

## 🎨 Визуальные элементы

### Цветовая схема:

- **Реранкинг чекбокс**: Зелёный (`text-green-600`)
- **Бейдж реранкинга**: Зелёный (`bg-green-100`)
- **Статистика**: Градиент зелёный→синий
- **Улучшение score**: Жирный зелёный (`text-green-600 font-bold`)

### Иконки:

- 🎯 - реранкинг
- 📊 - параметры
- ✅ - успешное изменение топ-1
- ➡️ - топ-1 не изменился
- 💡 - подсказка

---

## 🔄 Состояния UI

### 1. Реранкинг выключен (по умолчанию)

```
☐ Использовать реранкинг (улучшает точность +40%)
```

### 2. Реранкинг включён, настройки скрыты

```
☑️ Использовать реранкинг (улучшает точность +40%)
  ▶ Показать настройки
  💡 Реранкинг анализирует результаты...
```

### 3. Реранкинг включён, настройки видны

```
☑️ Использовать реранкинг (улучшает точность +40%)
  ▼ Скрыть настройки
  
  Метод реранкинга: [Hybrid ▼]
  📊 Параметры:
  • Первичный поиск: top-20
  • Финальный отбор: top-5
  • Порог качества: 0.5
  
  💡 Реранкинг анализирует результаты...
```

---

## 🧪 Сценарий тестирования для демонстрации

### Сравнение БЕЗ / С реранкингом:

1. **Запрос БЕЗ реранкинга:**
   - Выключи "☐ Использовать реранкинг"
   - Задай: "Какая база данных в Foodee?"
   - Запомни avg релевантность (например, 45%)

2. **Запрос С реранкингом:**
   - Включи "☑️ Использовать реранкинг"
   - Задай тот же вопрос
   - Сравни:
     - Avg релевантность (→ 67%)
     - Качество (→ 4/5 high)
     - Ответ стал точнее

3. **Покажи статистику:**
   - Прокрути до "🎯 Статистика реранкинга"
   - Укажи на улучшение +22%
   - Покажи что топ-1 изменился

---

## 📱 Адаптивность

- Desktop: Настройки в 2 колонки
- Mobile: Настройки в 1 колонку
- Dark mode: Полная поддержка

---

## 💡 Подсказки в UI

В интерфейсе есть подсказки:

1. "улучшает точность +40%" - рядом с чекбоксом
2. "💡 Реранкинг анализирует результаты..." - под настройками
3. "▶ Показать настройки" - для раскрытия
4. Описания методов в dropdown

---

**Теперь UI полностью готов для демонстрации реранкинга!** 🎉
